# WhatsApp Scheduler

Приложение для отложенной отправки сообщений в WhatsApp с простым и удобным интерфейсом.

## Возможности

- Отправка отложенных сообщений в WhatsApp
- Планирование сообщений с учетом часовых поясов
- Автоматическая отправка в заданное время
- Отображение списка запланированных сообщений
- Возможность отмены запланированной отправки
- Авторизация через QR-код
- Сохранение сессии для повторного использования

## Требования

- Windows 7/8/10/11
- Активная учетная запись WhatsApp на мобильном устройстве
- Подключение к интернету

## Установка и запуск

### Установка новой версии (обновлено!)

Для установки приложения с учетом исправления уязвимостей безопасности:

1. Убедитесь, что у вас установлен [Node.js](https://nodejs.org/) версии 14 или выше
2. Клонируйте репозиторий:
   ```
   git clone https://github.com/SLAVAWEBru/whatsapp-scheduler.git
   cd whatsapp-scheduler
   ```
3. Удалите предыдущие установки (если есть):
   ```
   rm -rf node_modules package-lock.json
   ```
   
   На Windows:
   ```
   rmdir /s /q node_modules
   del package-lock.json
   ```
4. Установите зависимости:
   ```
   npm install
   ```
5. Запустите приложение:
   ```
   npm start
   ```

Более подробную информацию по безопасности см. в файле [SECURITY.md](./SECURITY.md).

### Способ 1: Установка из исходников (для разработчиков)

1. Убедитесь, что у вас установлен [Node.js](https://nodejs.org/) версии 14 или выше
2. Клонируйте этот репозиторий или создайте папку с перечисленными ниже файлами
3. Перейдите в папку проекта и установите зависимости:
   ```
   npm install
   ```
4. Запустите приложение в режиме разработки:
   ```
   npm start
   ```
5. Для сборки исполняемого файла:
   ```
   npm run build
   ```

### Способ 2: Установка готового приложения

1. Скачайте последнюю версию установщика из раздела релизов
2. Запустите установщик и следуйте инструкциям
3. Запустите приложение и отсканируйте QR-код для авторизации

## Использование

1. При первом запуске отсканируйте QR-код в приложении WhatsApp на вашем телефоне
   - Откройте WhatsApp на телефоне
   - Нажмите на три точки (меню) в правом верхнем углу
   - Выберите "Связанные устройства"
   - Нажмите "Привязать устройство"
   - Наведите камеру на QR-код в приложении
2. Введите номер телефона получателя (формат: +7XXXXXXXXXX или XXXXXXXXXX)
3. Введите текст сообщения
4. Выберите дату и время отправки
5. Выберите часовой пояс (по умолчанию используется ваш локальный часовой пояс)
6. Нажмите кнопку "Запланировать отправку"
7. Запланированные сообщения будут отображаться на вкладке "Запланированные"

## Примечания

- Приложение должно быть запущено в момент запланированной отправки сообщения
- При первой авторизации WhatsApp потребуется отсканировать QR-код
- После отправки сообщения оно автоматически удаляется из списка запланированных
- Для корректной работы не закрывайте приложение, если у вас есть запланированные сообщения

## Решение проблем с QR-кодом

Если вы столкнулись с тем, что QR-код не отображается в приложении:

1. **Проверьте наличие всех зависимостей**
   - Убедитесь, что у вас установлены пакеты `puppeteer` и `qrcode`
   - Если нет, выполните:
     ```
     npm install puppeteer qrcode-terminal --save
     ```

2. **Используйте кнопку "Перезагрузить QR-код"**
   - Нажмите кнопку "Перезагрузить QR-код" внизу QR-кода
   - Подождите несколько секунд для восстановления соединения

3. **Проверьте консоль разработчика**
   - В приложении можно увидеть дополнительную отладочную информацию
   - При возникновении проблем, сообщите об ошибках в разделе Issues на GitHub

4. **Проверьте интернет-соединение**
   - Приложение требует стабильного интернет-соединения для работы с WhatsApp Web

5. **Используйте терминальный QR-код в консоли**
   - При запуске приложения в консоли отображается текстовый QR-код, который также можно отсканировать

## Устранение уязвимостей безопасности

Если при установке вы получаете предупреждения о уязвимостях в зависимостях:

1. Удалите папку `node_modules` и файл `package-lock.json` 
2. Установите зависимости заново с помощью команды `npm install`
3. Если проблемы продолжаются, обратитесь к файлу [SECURITY.md](./SECURITY.md)

## Удаление предыдущих установок

Чтобы полностью удалить предыдущие установки приложения:

1. Удалите установленное приложение через Панель управления > Программы и компоненты
2. Удалите папку данных приложения:
   - Нажмите Win+R, введите `%APPDATA%` и найдите папку `WhatsApp Scheduler`
   - Нажмите Win+R, введите `%LOCALAPPDATA%` и найдите папку `WhatsApp Scheduler`
3. Удалите данные сессии WhatsApp: найдите и удалите папки `.wwebjs_auth` и `.wwebjs_cache`

## Возможные проблемы и их решение

1. **Ошибка авторизации**
   - Переустановите приложение или удалите папку `.wwebjs_auth` в папке приложения
   - Убедитесь, что ваш телефон подключен к интернету во время сканирования QR-кода

2. **Сообщения не отправляются**
   - Проверьте подключение к интернету
   - Убедитесь, что WhatsApp Web авторизован (статус должен быть "Подключено")
   - Проверьте правильность формата номера телефона (рекомендуется формат +7XXXXXXXXXX)

3. **Проблемы с установкой**
   - Убедитесь, что у вас установлен Node.js (для установки из исходников)
   - Временно отключите антивирус при установке, так как он может блокировать процесс

4. **Проблемы с Puppeteer**
   - Если Chromium не запускается, попробуйте:
     ```
     npx puppeteer browsers install chrome
     ```
   - Проверьте, не блокирует ли антивирус или файервол запуск Chromium
